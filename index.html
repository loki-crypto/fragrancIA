<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Descubra seu perfume ideal com o Fragancia - Seu guia pessoal de fragrâncias"
    />
    <title>Fragancia - Seu Guia de Perfumes</title>

    <!-- CSS -->
    <link rel="stylesheet" href="css/global.css" />
    <link rel="stylesheet" href="css/navbar.css" />
    <link rel="stylesheet" href="css/home.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <!-- Navegação -->
    <header>
      <nav class="navbar">
        <a href="index.html" class="logo"> FragancIA </a>

        <button class="mobile-menu-toggle" id="mobile-menu-toggle">
          <span></span>
          <span></span>
          <span></span>
        </button>

        <ul class="nav-links" id="nav-links">
          <li><a href="index.html" class="active">Início</a></li>
          <li><a href="#features">Guias</a></li>
          <li><a href="#stats">Estatísticas</a></li>

          <!-- MENU DO USUÁRIO -->
          <li>
            <div class="user-menu">
              <div class="user-avatar">
                <i class="fas fa-user"></i>
              </div>

              <div class="user-dropdown">
                <!-- VISÍVEIS SEM LOGIN -->
                <a href="pages/login.html" id="login-btn">Fazer Login</a>
                <a href="pages/cadastro.html" id="register-btn">Criar Conta</a>

                <!-- VISÍVEIS APENAS LOGADO -->
                <a href="pages/perfil.html" class="logged-only" style="display:none;">Perfil</a>
                <a href="pages/historico.html" class="logged-only" style="display:none;">Histórico</a>
                <a href="pages/favoritos.html" class="logged-only" style="display:none;">Favoritos</a>
                <a href="#" id="logout-btn" class="logged-only" style="display:none; color:red; text-decoration: none; align-items: center; gap: 5px;">
                    <i class="fa-solid fa-right-from-bracket"></i> Logout</a>
              </div>
            </div>
          </li>
        </ul>
      </nav>
    </header>

    <!-- Conteúdo Principal -->
    <main>
      <!-- Seção Hero -->
      <section class="hero-section">
        <div class="hero-image"></div>
        <div class="hero-content">
          <h1>Descubra Seu Aroma Perfeito</h1>
          <p>A jornada para encontrar sua fragrância ideal começa aqui</p>
          <a href="pages/quiz.html" class="cta-button">
            Começar Jornada
            <span class="arrow">→</span>
          </a>
        </div>
      </section>

      <!-- Seção de Boas-vindas -->
      <section class="welcome-section">
        <div class="welcome-text">
          <h1>Seja bem-vindo(a) ao Fragancia</h1>
          <p>
            O seu guia especializado para encontrar o perfume perfeito que
            combina com sua personalidade e estilo de vida.
          </p>
          <p>
            Responda nosso quiz personalizado e descubra as fragrâncias ideais
            baseadas em suas preferências, ocasião de uso e impressão que deseja
            causar.
          </p>
          <p>
            Una-se a uma comunidade apaixonada por perfumaria, compartilhe
            experiências e fique por dentro das últimas novidades do mundo das
            fragrâncias.
          </p>

          <a href="pages/quiz.html" class="cta-button">
            Faça o teste agora!
            <span class="arrow">→</span>
          </a>
        </div>
      </section>

      <!-- Seção de Features -->
      <section class="features-section" id="features">
        <div class="container">
          <h2 class="text-center mb-4">Por que escolher o Fragancia?</h2>
          <div class="features-grid">
            <div class="feature-card">
              <div class="feature-icon">
                <i class="fas fa-brain"></i>
              </div>
              <h3>Quiz Inteligente</h3>
              <p>
                Algoritmo avançado que analisa suas preferências e sugere
                perfumes personalizados
              </p>
            </div>

            <div class="feature-card">
              <div class="feature-icon">
                <i class="fas fa-gem"></i>
              </div>
              <h3>Curadoria Exclusiva</h3>
              <p>
                Seleção refinada de fragrâncias premium e nichos difíceis de
                encontrar
              </p>
            </div>

            <div class="feature-card">
              <div class="feature-icon">
                <i class="fas fa-users"></i>
              </div>
              <h3>Comunidade Ativa</h3>
              <p>
                Compartilhe experiências e aprenda com outros entusiastas de
                perfumaria
              </p>
            </div>

            <div class="feature-card">
              <div class="feature-icon">
                <i class="fas fa-tag"></i>
              </div>
              <h3>Melhores Ofertas</h3>
              <p>
                Compare preços e encontre as melhores ofertas do mercado em
                tempo real
              </p>
            </div>
          </div>
        </div>
      </section>

      <section class="stats-section" id="cover">
        <div class="stats-grid">
          <div class="stat-item">
            <h3>Conosco você tem a sua melhor versão.</h3>
          </div>
        </div>
      </section>

      <!-- Seção de Estatísticas -->
      <section class="stats-section" id="stats">
        <div class="stats-grid">
          <div class="stat-item">
            <h2>5000+</h2>
            <p>Perfumes Catalogados</p>
          </div>
          <div class="stat-item">
            <h2>15k+</h2>
            <p>Usuários Ativos</p>
          </div>
          <div class="stat-item">
            <h2>98%</h2>
            <p>Satisfação</p>
          </div>
          <div class="stat-item">
            <h2>200+</h2>
            <p>Marcas Premium</p>
          </div>
        </div>
      </section>
    </main>

    <!-- SCRIPT DO LOGIN / DROPDOWN -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const userData = localStorage.getItem("user");
        const token = localStorage.getItem("token");

        const loginBtn = document.getElementById("login-btn");
        const registerBtn = document.getElementById("register-btn");

        const loggedOnlyItems = document.querySelectorAll(".logged-only");

        if (token && userData) {
          const user = JSON.parse(userData);

          // Mostrar nome no avatar
          const avatar = document.querySelector(".user-avatar");
          const nome = user.nome.trim().split(" ");
          const iniciais =
            nome.length >= 2
              ? nome[0][0] + nome[nome.length - 1][0]
              : nome[0][0];
                    
          avatar.innerHTML = `<div class="avatar-circle">${iniciais.toUpperCase()}</div>`;


          // Esconder login e cadastro
          loginBtn.style.display = "none";
          registerBtn.style.display = "none";

          // Mostrar itens exclusivos
          loggedOnlyItems.forEach(el => el.style.display = "block");

          // Logout
          const logout = document.getElementById("logout-btn");
          logout.addEventListener("click", () => {
            localStorage.removeItem("user");
            localStorage.removeItem("token");
            window.location.reload();
          });

        } else {
          // Mostrar apenas login e cadastro
          loginBtn.style.display = "block";
          registerBtn.style.display = "block";

          loggedOnlyItems.forEach(el => el.style.display = "none");
        }
      });
    </script>

    <script src="../js/api-config.js"></script>
    <script src="js/navbar.js"></script>
  </body>
</html>
